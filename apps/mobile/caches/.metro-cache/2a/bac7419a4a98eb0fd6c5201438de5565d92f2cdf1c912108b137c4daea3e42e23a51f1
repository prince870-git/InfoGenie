{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"]}},{"name":"../__create/fetch","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":43,"index":43}}],"key":"uDbGT+4c/HxjzDIzcSOBIlCi0lg=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.searchInfoGenie = exports.saveResearch = exports.getSearchHistory = exports.getSavedResearch = void 0;\n  var _env2 = require(_dependencyMap[1], \"expo/virtual/env\");\n  var _fetch = _interopRequireDefault(require(_dependencyMap[2], \"../__create/fetch\"));\n  // Get base URL - use environment variable or fallback to current origin for web\n  const getBaseURL = () => {\n    if (_env2.env.EXPO_PUBLIC_BASE_URL) {\n      return _env2.env.EXPO_PUBLIC_BASE_URL;\n    }\n    // For web in development, try to detect the web server\n    if (typeof window !== 'undefined' && window.location) {\n      // If we're on Expo's port (8081), try to use the web server port\n      if (window.location.port === '8081' || window.location.port === '19006') {\n        // Try common web server ports (4000, 4001, 4002, 4003)\n        // Web server typically runs on one of these ports\n        // Start with 4003 as it's the most recent\n        return `http://localhost:4003`;\n      }\n      return window.location.origin;\n    }\n    return '';\n  };\n\n  /**\n   * Search API utility for InfoGenie\n   */\n  const searchInfoGenie = async (query, mode = 'general') => {\n    try {\n      const baseURL = getBaseURL();\n      const url = baseURL ? `${baseURL}/api/search` : '/api/search';\n      const response = await (0, _fetch.default)(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          query: query.trim(),\n          mode\n        })\n      });\n      if (!response.ok) {\n        const text = await response.text();\n        console.error('Search API error response:', text);\n        throw new Error(`Search failed: ${response.statusText}`);\n      }\n\n      // Check if response is JSON\n      const contentType = response.headers.get('content-type');\n      if (!contentType || !contentType.includes('application/json')) {\n        const text = await response.text();\n        console.error('Non-JSON response received:', text.substring(0, 200));\n        throw new Error('Server returned non-JSON response. Make sure the web API server is running.');\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error('Search API error:', error);\n      throw error;\n    }\n  };\n\n  /**\n   * Get search history\n   */\n  exports.searchInfoGenie = searchInfoGenie;\n  const getSearchHistory = async (limit = 20, offset = 0) => {\n    try {\n      const baseURL = getBaseURL();\n      const url = baseURL ? `${baseURL}/api/search-history?limit=${limit}&offset=${offset}` : `/api/search-history?limit=${limit}&offset=${offset}`;\n      const response = await (0, _fetch.default)(url, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`Failed to fetch history: ${response.statusText}`);\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error('Search history error:', error);\n      return [];\n    }\n  };\n\n  /**\n   * Save research item\n   */\n  exports.getSearchHistory = getSearchHistory;\n  const saveResearch = async (searchId, title, folder = 'General', notes = '') => {\n    try {\n      const baseURL = getBaseURL();\n      const url = baseURL ? `${baseURL}/api/saved-research` : '/api/saved-research';\n      const response = await (0, _fetch.default)(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          search_id: searchId,\n          title,\n          folder,\n          notes\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Failed to save research: ${response.statusText}`);\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error('Save research error:', error);\n      throw error;\n    }\n  };\n\n  /**\n   * Get saved research items\n   */\n  exports.saveResearch = saveResearch;\n  const getSavedResearch = async (folder = null, limit = 20, offset = 0) => {\n    try {\n      const baseURL = getBaseURL();\n      let url = baseURL ? `${baseURL}/api/saved-research?limit=${limit}&offset=${offset}` : `/api/saved-research?limit=${limit}&offset=${offset}`;\n      if (folder) {\n        url += `&folder=${encodeURIComponent(folder)}`;\n      }\n      const response = await (0, _fetch.default)(url, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`Failed to fetch saved research: ${response.statusText}`);\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error('Get saved research error:', error);\n      return [];\n    }\n  };\n  exports.getSavedResearch = getSavedResearch;\n});","lineCount":150,"map":[[8,2,1,0],[8,6,1,0,"_fetch"],[8,12,1,0],[8,15,1,0,"_interopRequireDefault"],[8,37,1,0],[8,38,1,0,"require"],[8,45,1,0],[8,46,1,0,"_dependencyMap"],[8,60,1,0],[9,2,3,0],[10,2,4,0],[10,8,4,6,"getBaseURL"],[10,18,4,16],[10,21,4,19,"getBaseURL"],[10,22,4,19],[10,27,4,25],[11,4,5,2],[11,8,5,2,"_env2"],[11,13,5,2],[11,14,5,2,"env"],[11,17,5,2],[11,18,5,2,"EXPO_PUBLIC_BASE_URL"],[11,38,5,2],[11,40,5,40],[12,6,6,4],[12,13,6,4,"_env2"],[12,18,6,4],[12,19,6,4,"env"],[12,22,6,4],[12,23,6,4,"EXPO_PUBLIC_BASE_URL"],[12,43,6,4],[13,4,7,2],[14,4,8,2],[15,4,9,2],[15,8,9,6],[15,15,9,13,"window"],[15,21,9,19],[15,26,9,24],[15,37,9,35],[15,41,9,39,"window"],[15,47,9,45],[15,48,9,46,"location"],[15,56,9,54],[15,58,9,56],[16,6,10,4],[17,6,11,4],[17,10,11,8,"window"],[17,16,11,14],[17,17,11,15,"location"],[17,25,11,23],[17,26,11,24,"port"],[17,30,11,28],[17,35,11,33],[17,41,11,39],[17,45,11,43,"window"],[17,51,11,49],[17,52,11,50,"location"],[17,60,11,58],[17,61,11,59,"port"],[17,65,11,63],[17,70,11,68],[17,77,11,75],[17,79,11,77],[18,8,12,6],[19,8,13,6],[20,8,14,6],[21,8,15,6],[21,15,15,13],[21,38,15,36],[22,6,16,4],[23,6,17,4],[23,13,17,11,"window"],[23,19,17,17],[23,20,17,18,"location"],[23,28,17,26],[23,29,17,27,"origin"],[23,35,17,33],[24,4,18,2],[25,4,19,2],[25,11,19,9],[25,13,19,11],[26,2,20,0],[26,3,20,1],[28,2,22,0],[29,0,23,0],[30,0,24,0],[31,2,25,7],[31,8,25,13,"searchInfoGenie"],[31,23,25,28],[31,26,25,31],[31,32,25,31,"searchInfoGenie"],[31,33,25,38,"query"],[31,38,25,43],[31,40,25,45,"mode"],[31,44,25,49],[31,47,25,52],[31,56,25,61],[31,61,25,66],[32,4,26,2],[32,8,26,6],[33,6,27,4],[33,12,27,10,"baseURL"],[33,19,27,17],[33,22,27,20,"getBaseURL"],[33,32,27,30],[33,33,27,31],[33,34,27,32],[34,6,28,4],[34,12,28,10,"url"],[34,15,28,13],[34,18,28,16,"baseURL"],[34,25,28,23],[34,28,28,26],[34,31,28,29,"baseURL"],[34,38,28,36],[34,51,28,49],[34,54,28,52],[34,67,28,65],[35,6,30,4],[35,12,30,10,"response"],[35,20,30,18],[35,23,30,21],[35,29,30,27],[35,33,30,27,"fetchToWeb"],[35,47,30,37],[35,49,30,38,"url"],[35,52,30,41],[35,54,30,43],[36,8,31,6,"method"],[36,14,31,12],[36,16,31,14],[36,22,31,20],[37,8,32,6,"headers"],[37,15,32,13],[37,17,32,15],[38,10,33,8],[38,24,33,22],[38,26,33,24],[39,8,34,6],[39,9,34,7],[40,8,35,6,"body"],[40,12,35,10],[40,14,35,12,"JSON"],[40,18,35,16],[40,19,35,17,"stringify"],[40,28,35,26],[40,29,35,27],[41,10,35,29,"query"],[41,15,35,34],[41,17,35,36,"query"],[41,22,35,41],[41,23,35,42,"trim"],[41,27,35,46],[41,28,35,47],[41,29,35,48],[42,10,35,50,"mode"],[43,8,35,55],[43,9,35,56],[44,6,36,4],[44,7,36,5],[44,8,36,6],[45,6,38,4],[45,10,38,8],[45,11,38,9,"response"],[45,19,38,17],[45,20,38,18,"ok"],[45,22,38,20],[45,24,38,22],[46,8,39,6],[46,14,39,12,"text"],[46,18,39,16],[46,21,39,19],[46,27,39,25,"response"],[46,35,39,33],[46,36,39,34,"text"],[46,40,39,38],[46,41,39,39],[46,42,39,40],[47,8,40,6,"console"],[47,15,40,13],[47,16,40,14,"error"],[47,21,40,19],[47,22,40,20],[47,50,40,48],[47,52,40,50,"text"],[47,56,40,54],[47,57,40,55],[48,8,41,6],[48,14,41,12],[48,18,41,16,"Error"],[48,23,41,21],[48,24,41,22],[48,42,41,40,"response"],[48,50,41,48],[48,51,41,49,"statusText"],[48,61,41,59],[48,63,41,61],[48,64,41,62],[49,6,42,4],[51,6,44,4],[52,6,45,4],[52,12,45,10,"contentType"],[52,23,45,21],[52,26,45,24,"response"],[52,34,45,32],[52,35,45,33,"headers"],[52,42,45,40],[52,43,45,41,"get"],[52,46,45,44],[52,47,45,45],[52,61,45,59],[52,62,45,60],[53,6,46,4],[53,10,46,8],[53,11,46,9,"contentType"],[53,22,46,20],[53,26,46,24],[53,27,46,25,"contentType"],[53,38,46,36],[53,39,46,37,"includes"],[53,47,46,45],[53,48,46,46],[53,66,46,64],[53,67,46,65],[53,69,46,67],[54,8,47,6],[54,14,47,12,"text"],[54,18,47,16],[54,21,47,19],[54,27,47,25,"response"],[54,35,47,33],[54,36,47,34,"text"],[54,40,47,38],[54,41,47,39],[54,42,47,40],[55,8,48,6,"console"],[55,15,48,13],[55,16,48,14,"error"],[55,21,48,19],[55,22,48,20],[55,51,48,49],[55,53,48,51,"text"],[55,57,48,55],[55,58,48,56,"substring"],[55,67,48,65],[55,68,48,66],[55,69,48,67],[55,71,48,69],[55,74,48,72],[55,75,48,73],[55,76,48,74],[56,8,49,6],[56,14,49,12],[56,18,49,16,"Error"],[56,23,49,21],[56,24,49,22],[56,101,49,99],[56,102,49,100],[57,6,50,4],[58,6,52,4],[58,12,52,10,"data"],[58,16,52,14],[58,19,52,17],[58,25,52,23,"response"],[58,33,52,31],[58,34,52,32,"json"],[58,38,52,36],[58,39,52,37],[58,40,52,38],[59,6,53,4],[59,13,53,11,"data"],[59,17,53,15],[60,4,54,2],[60,5,54,3],[60,6,54,4],[60,13,54,11,"error"],[60,18,54,16],[60,20,54,18],[61,6,55,4,"console"],[61,13,55,11],[61,14,55,12,"error"],[61,19,55,17],[61,20,55,18],[61,39,55,37],[61,41,55,39,"error"],[61,46,55,44],[61,47,55,45],[62,6,56,4],[62,12,56,10,"error"],[62,17,56,15],[63,4,57,2],[64,2,58,0],[64,3,58,1],[66,2,60,0],[67,0,61,0],[68,0,62,0],[69,2,60,0,"exports"],[69,9,60,0],[69,10,60,0,"searchInfoGenie"],[69,25,60,0],[69,28,60,0,"searchInfoGenie"],[69,43,60,0],[70,2,63,7],[70,8,63,13,"getSearchHistory"],[70,24,63,29],[70,27,63,32],[70,33,63,32,"getSearchHistory"],[70,34,63,39,"limit"],[70,39,63,44],[70,42,63,47],[70,44,63,49],[70,46,63,51,"offset"],[70,52,63,57],[70,55,63,60],[70,56,63,61],[70,61,63,66],[71,4,64,2],[71,8,64,6],[72,6,65,4],[72,12,65,10,"baseURL"],[72,19,65,17],[72,22,65,20,"getBaseURL"],[72,32,65,30],[72,33,65,31],[72,34,65,32],[73,6,66,4],[73,12,66,10,"url"],[73,15,66,13],[73,18,66,16,"baseURL"],[73,25,66,23],[73,28,67,8],[73,31,67,11,"baseURL"],[73,38,67,18],[73,67,67,47,"limit"],[73,72,67,52],[73,83,67,63,"offset"],[73,89,67,69],[73,91,67,71],[73,94,68,8],[73,123,68,37,"limit"],[73,128,68,42],[73,139,68,53,"offset"],[73,145,68,59],[73,147,68,61],[74,6,70,4],[74,12,70,10,"response"],[74,20,70,18],[74,23,70,21],[74,29,70,27],[74,33,70,27,"fetchToWeb"],[74,47,70,37],[74,49,70,38,"url"],[74,52,70,41],[74,54,70,43],[75,8,71,6,"method"],[75,14,71,12],[75,16,71,14],[75,21,71,19],[76,8,72,6,"headers"],[76,15,72,13],[76,17,72,15],[77,10,73,8],[77,24,73,22],[77,26,73,24],[78,8,74,6],[79,6,75,4],[79,7,75,5],[79,8,75,6],[80,6,77,4],[80,10,77,8],[80,11,77,9,"response"],[80,19,77,17],[80,20,77,18,"ok"],[80,22,77,20],[80,24,77,22],[81,8,78,6],[81,14,78,12],[81,18,78,16,"Error"],[81,23,78,21],[81,24,78,22],[81,52,78,50,"response"],[81,60,78,58],[81,61,78,59,"statusText"],[81,71,78,69],[81,73,78,71],[81,74,78,72],[82,6,79,4],[83,6,81,4],[83,12,81,10,"data"],[83,16,81,14],[83,19,81,17],[83,25,81,23,"response"],[83,33,81,31],[83,34,81,32,"json"],[83,38,81,36],[83,39,81,37],[83,40,81,38],[84,6,82,4],[84,13,82,11,"data"],[84,17,82,15],[85,4,83,2],[85,5,83,3],[85,6,83,4],[85,13,83,11,"error"],[85,18,83,16],[85,20,83,18],[86,6,84,4,"console"],[86,13,84,11],[86,14,84,12,"error"],[86,19,84,17],[86,20,84,18],[86,43,84,41],[86,45,84,43,"error"],[86,50,84,48],[86,51,84,49],[87,6,85,4],[87,13,85,11],[87,15,85,13],[88,4,86,2],[89,2,87,0],[89,3,87,1],[91,2,89,0],[92,0,90,0],[93,0,91,0],[94,2,89,0,"exports"],[94,9,89,0],[94,10,89,0,"getSearchHistory"],[94,26,89,0],[94,29,89,0,"getSearchHistory"],[94,45,89,0],[95,2,92,7],[95,8,92,13,"saveResearch"],[95,20,92,25],[95,23,92,28],[95,29,92,28,"saveResearch"],[95,30,92,35,"searchId"],[95,38,92,43],[95,40,92,45,"title"],[95,45,92,50],[95,47,92,52,"folder"],[95,53,92,58],[95,56,92,61],[95,65,92,70],[95,67,92,72,"notes"],[95,72,92,77],[95,75,92,80],[95,77,92,82],[95,82,92,87],[96,4,93,2],[96,8,93,6],[97,6,94,4],[97,12,94,10,"baseURL"],[97,19,94,17],[97,22,94,20,"getBaseURL"],[97,32,94,30],[97,33,94,31],[97,34,94,32],[98,6,95,4],[98,12,95,10,"url"],[98,15,95,13],[98,18,95,16,"baseURL"],[98,25,95,23],[98,28,95,26],[98,31,95,29,"baseURL"],[98,38,95,36],[98,59,95,57],[98,62,95,60],[98,83,95,81],[99,6,97,4],[99,12,97,10,"response"],[99,20,97,18],[99,23,97,21],[99,29,97,27],[99,33,97,27,"fetchToWeb"],[99,47,97,37],[99,49,97,38,"url"],[99,52,97,41],[99,54,97,43],[100,8,98,6,"method"],[100,14,98,12],[100,16,98,14],[100,22,98,20],[101,8,99,6,"headers"],[101,15,99,13],[101,17,99,15],[102,10,100,8],[102,24,100,22],[102,26,100,24],[103,8,101,6],[103,9,101,7],[104,8,102,6,"body"],[104,12,102,10],[104,14,102,12,"JSON"],[104,18,102,16],[104,19,102,17,"stringify"],[104,28,102,26],[104,29,102,27],[105,10,103,8,"search_id"],[105,19,103,17],[105,21,103,19,"searchId"],[105,29,103,27],[106,10,104,8,"title"],[106,15,104,13],[107,10,105,8,"folder"],[107,16,105,14],[108,10,106,8,"notes"],[109,8,107,6],[109,9,107,7],[110,6,108,4],[110,7,108,5],[110,8,108,6],[111,6,110,4],[111,10,110,8],[111,11,110,9,"response"],[111,19,110,17],[111,20,110,18,"ok"],[111,22,110,20],[111,24,110,22],[112,8,111,6],[112,14,111,12],[112,18,111,16,"Error"],[112,23,111,21],[112,24,111,22],[112,52,111,50,"response"],[112,60,111,58],[112,61,111,59,"statusText"],[112,71,111,69],[112,73,111,71],[112,74,111,72],[113,6,112,4],[114,6,114,4],[114,12,114,10,"data"],[114,16,114,14],[114,19,114,17],[114,25,114,23,"response"],[114,33,114,31],[114,34,114,32,"json"],[114,38,114,36],[114,39,114,37],[114,40,114,38],[115,6,115,4],[115,13,115,11,"data"],[115,17,115,15],[116,4,116,2],[116,5,116,3],[116,6,116,4],[116,13,116,11,"error"],[116,18,116,16],[116,20,116,18],[117,6,117,4,"console"],[117,13,117,11],[117,14,117,12,"error"],[117,19,117,17],[117,20,117,18],[117,42,117,40],[117,44,117,42,"error"],[117,49,117,47],[117,50,117,48],[118,6,118,4],[118,12,118,10,"error"],[118,17,118,15],[119,4,119,2],[120,2,120,0],[120,3,120,1],[122,2,122,0],[123,0,123,0],[124,0,124,0],[125,2,122,0,"exports"],[125,9,122,0],[125,10,122,0,"saveResearch"],[125,22,122,0],[125,25,122,0,"saveResearch"],[125,37,122,0],[126,2,125,7],[126,8,125,13,"getSavedResearch"],[126,24,125,29],[126,27,125,32],[126,33,125,32,"getSavedResearch"],[126,34,125,39,"folder"],[126,40,125,45],[126,43,125,48],[126,47,125,52],[126,49,125,54,"limit"],[126,54,125,59],[126,57,125,62],[126,59,125,64],[126,61,125,66,"offset"],[126,67,125,72],[126,70,125,75],[126,71,125,76],[126,76,125,81],[127,4,126,2],[127,8,126,6],[128,6,127,4],[128,12,127,10,"baseURL"],[128,19,127,17],[128,22,127,20,"getBaseURL"],[128,32,127,30],[128,33,127,31],[128,34,127,32],[129,6,128,4],[129,10,128,8,"url"],[129,13,128,11],[129,16,128,14,"baseURL"],[129,23,128,21],[129,26,129,8],[129,29,129,11,"baseURL"],[129,36,129,18],[129,65,129,47,"limit"],[129,70,129,52],[129,81,129,63,"offset"],[129,87,129,69],[129,89,129,71],[129,92,130,8],[129,121,130,37,"limit"],[129,126,130,42],[129,137,130,53,"offset"],[129,143,130,59],[129,145,130,61],[130,6,131,4],[130,10,131,8,"folder"],[130,16,131,14],[130,18,131,16],[131,8,132,6,"url"],[131,11,132,9],[131,15,132,13],[131,26,132,24,"encodeURIComponent"],[131,44,132,42],[131,45,132,43,"folder"],[131,51,132,49],[131,52,132,50],[131,54,132,52],[132,6,133,4],[133,6,135,4],[133,12,135,10,"response"],[133,20,135,18],[133,23,135,21],[133,29,135,27],[133,33,135,27,"fetchToWeb"],[133,47,135,37],[133,49,135,38,"url"],[133,52,135,41],[133,54,135,43],[134,8,136,6,"method"],[134,14,136,12],[134,16,136,14],[134,21,136,19],[135,8,137,6,"headers"],[135,15,137,13],[135,17,137,15],[136,10,138,8],[136,24,138,22],[136,26,138,24],[137,8,139,6],[138,6,140,4],[138,7,140,5],[138,8,140,6],[139,6,142,4],[139,10,142,8],[139,11,142,9,"response"],[139,19,142,17],[139,20,142,18,"ok"],[139,22,142,20],[139,24,142,22],[140,8,143,6],[140,14,143,12],[140,18,143,16,"Error"],[140,23,143,21],[140,24,143,22],[140,59,143,57,"response"],[140,67,143,65],[140,68,143,66,"statusText"],[140,78,143,76],[140,80,143,78],[140,81,143,79],[141,6,144,4],[142,6,146,4],[142,12,146,10,"data"],[142,16,146,14],[142,19,146,17],[142,25,146,23,"response"],[142,33,146,31],[142,34,146,32,"json"],[142,38,146,36],[142,39,146,37],[142,40,146,38],[143,6,147,4],[143,13,147,11,"data"],[143,17,147,15],[144,4,148,2],[144,5,148,3],[144,6,148,4],[144,13,148,11,"error"],[144,18,148,16],[144,20,148,18],[145,6,149,4,"console"],[145,13,149,11],[145,14,149,12,"error"],[145,19,149,17],[145,20,149,18],[145,47,149,45],[145,49,149,47,"error"],[145,54,149,52],[145,55,149,53],[146,6,150,4],[146,13,150,11],[146,15,150,13],[147,4,151,2],[148,2,152,0],[148,3,152,1],[149,2,152,2,"exports"],[149,9,152,2],[149,10,152,2,"getSavedResearch"],[149,26,152,2],[149,29,152,2,"getSavedResearch"],[149,45,152,2],[150,0,152,2],[150,3]],"functionMap":{"names":["<global>","getBaseURL","searchInfoGenie","getSearchHistory","saveResearch","getSavedResearch"],"mappings":"AAA;mBCG;CDgB;+BEK;CFiC;gCGK;CHwB;4BIK;CJ4B;gCKK;CL2B"}},"type":"js/module"}]}