{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"]}},{"name":"../__create/fetch","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":43,"index":43}}],"key":"uDbGT+4c/HxjzDIzcSOBIlCi0lg=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.searchInfoGenie = exports.saveResearch = exports.getSearchHistory = exports.getSavedResearch = void 0;\n  var _env2 = require(_dependencyMap[1], \"expo/virtual/env\");\n  var _fetch = _interopRequireDefault(require(_dependencyMap[2], \"../__create/fetch\"));\n  // Get base URL - use environment variable or fallback to current origin for web\n  const getBaseURL = () => {\n    if (_env2.env.EXPO_PUBLIC_BASE_URL) {\n      return _env2.env.EXPO_PUBLIC_BASE_URL;\n    }\n    // For web in development, try to detect the web server\n    if (typeof window !== 'undefined' && window.location) {\n      // If we're on Expo's port (8081), try to use the web server port\n      if (window.location.port === '8081' || window.location.port === '19006') {\n        // Try common web server ports (4000, 4001, 4002)\n        // Web server typically runs on one of these ports\n        return `http://localhost:4002`;\n      }\n      return window.location.origin;\n    }\n    return '';\n  };\n\n  /**\n   * Search API utility for InfoGenie\n   */\n  const searchInfoGenie = async (query, mode = 'general') => {\n    try {\n      const baseURL = getBaseURL();\n      const url = baseURL ? `${baseURL}/api/search` : '/api/search';\n      const response = await (0, _fetch.default)(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          query: query.trim(),\n          mode\n        })\n      });\n      if (!response.ok) {\n        const text = await response.text();\n        console.error('Search API error response:', text);\n        throw new Error(`Search failed: ${response.statusText}`);\n      }\n\n      // Check if response is JSON\n      const contentType = response.headers.get('content-type');\n      if (!contentType || !contentType.includes('application/json')) {\n        const text = await response.text();\n        console.error('Non-JSON response received:', text.substring(0, 200));\n        throw new Error('Server returned non-JSON response. Make sure the web API server is running.');\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error('Search API error:', error);\n      throw error;\n    }\n  };\n\n  /**\n   * Get search history\n   */\n  exports.searchInfoGenie = searchInfoGenie;\n  const getSearchHistory = async (limit = 20, offset = 0) => {\n    try {\n      const baseURL = getBaseURL();\n      const url = baseURL ? `${baseURL}/api/search-history?limit=${limit}&offset=${offset}` : `/api/search-history?limit=${limit}&offset=${offset}`;\n      const response = await (0, _fetch.default)(url, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`Failed to fetch history: ${response.statusText}`);\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error('Search history error:', error);\n      return [];\n    }\n  };\n\n  /**\n   * Save research item\n   */\n  exports.getSearchHistory = getSearchHistory;\n  const saveResearch = async (searchId, title, folder = 'General', notes = '') => {\n    try {\n      const baseURL = getBaseURL();\n      const url = baseURL ? `${baseURL}/api/saved-research` : '/api/saved-research';\n      const response = await (0, _fetch.default)(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          search_id: searchId,\n          title,\n          folder,\n          notes\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Failed to save research: ${response.statusText}`);\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error('Save research error:', error);\n      throw error;\n    }\n  };\n\n  /**\n   * Get saved research items\n   */\n  exports.saveResearch = saveResearch;\n  const getSavedResearch = async (folder = null, limit = 20, offset = 0) => {\n    try {\n      const baseURL = getBaseURL();\n      let url = baseURL ? `${baseURL}/api/saved-research?limit=${limit}&offset=${offset}` : `/api/saved-research?limit=${limit}&offset=${offset}`;\n      if (folder) {\n        url += `&folder=${encodeURIComponent(folder)}`;\n      }\n      const response = await (0, _fetch.default)(url, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`Failed to fetch saved research: ${response.statusText}`);\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error('Get saved research error:', error);\n      return [];\n    }\n  };\n  exports.getSavedResearch = getSavedResearch;\n});","lineCount":149,"map":[[8,2,1,0],[8,6,1,0,"_fetch"],[8,12,1,0],[8,15,1,0,"_interopRequireDefault"],[8,37,1,0],[8,38,1,0,"require"],[8,45,1,0],[8,46,1,0,"_dependencyMap"],[8,60,1,0],[9,2,3,0],[10,2,4,0],[10,8,4,6,"getBaseURL"],[10,18,4,16],[10,21,4,19,"getBaseURL"],[10,22,4,19],[10,27,4,25],[11,4,5,2],[11,8,5,2,"_env2"],[11,13,5,2],[11,14,5,2,"env"],[11,17,5,2],[11,18,5,2,"EXPO_PUBLIC_BASE_URL"],[11,38,5,2],[11,40,5,40],[12,6,6,4],[12,13,6,4,"_env2"],[12,18,6,4],[12,19,6,4,"env"],[12,22,6,4],[12,23,6,4,"EXPO_PUBLIC_BASE_URL"],[12,43,6,4],[13,4,7,2],[14,4,8,2],[15,4,9,2],[15,8,9,6],[15,15,9,13,"window"],[15,21,9,19],[15,26,9,24],[15,37,9,35],[15,41,9,39,"window"],[15,47,9,45],[15,48,9,46,"location"],[15,56,9,54],[15,58,9,56],[16,6,10,4],[17,6,11,4],[17,10,11,8,"window"],[17,16,11,14],[17,17,11,15,"location"],[17,25,11,23],[17,26,11,24,"port"],[17,30,11,28],[17,35,11,33],[17,41,11,39],[17,45,11,43,"window"],[17,51,11,49],[17,52,11,50,"location"],[17,60,11,58],[17,61,11,59,"port"],[17,65,11,63],[17,70,11,68],[17,77,11,75],[17,79,11,77],[18,8,12,6],[19,8,13,6],[20,8,14,6],[20,15,14,13],[20,38,14,36],[21,6,15,4],[22,6,16,4],[22,13,16,11,"window"],[22,19,16,17],[22,20,16,18,"location"],[22,28,16,26],[22,29,16,27,"origin"],[22,35,16,33],[23,4,17,2],[24,4,18,2],[24,11,18,9],[24,13,18,11],[25,2,19,0],[25,3,19,1],[27,2,21,0],[28,0,22,0],[29,0,23,0],[30,2,24,7],[30,8,24,13,"searchInfoGenie"],[30,23,24,28],[30,26,24,31],[30,32,24,31,"searchInfoGenie"],[30,33,24,38,"query"],[30,38,24,43],[30,40,24,45,"mode"],[30,44,24,49],[30,47,24,52],[30,56,24,61],[30,61,24,66],[31,4,25,2],[31,8,25,6],[32,6,26,4],[32,12,26,10,"baseURL"],[32,19,26,17],[32,22,26,20,"getBaseURL"],[32,32,26,30],[32,33,26,31],[32,34,26,32],[33,6,27,4],[33,12,27,10,"url"],[33,15,27,13],[33,18,27,16,"baseURL"],[33,25,27,23],[33,28,27,26],[33,31,27,29,"baseURL"],[33,38,27,36],[33,51,27,49],[33,54,27,52],[33,67,27,65],[34,6,29,4],[34,12,29,10,"response"],[34,20,29,18],[34,23,29,21],[34,29,29,27],[34,33,29,27,"fetchToWeb"],[34,47,29,37],[34,49,29,38,"url"],[34,52,29,41],[34,54,29,43],[35,8,30,6,"method"],[35,14,30,12],[35,16,30,14],[35,22,30,20],[36,8,31,6,"headers"],[36,15,31,13],[36,17,31,15],[37,10,32,8],[37,24,32,22],[37,26,32,24],[38,8,33,6],[38,9,33,7],[39,8,34,6,"body"],[39,12,34,10],[39,14,34,12,"JSON"],[39,18,34,16],[39,19,34,17,"stringify"],[39,28,34,26],[39,29,34,27],[40,10,34,29,"query"],[40,15,34,34],[40,17,34,36,"query"],[40,22,34,41],[40,23,34,42,"trim"],[40,27,34,46],[40,28,34,47],[40,29,34,48],[41,10,34,50,"mode"],[42,8,34,55],[42,9,34,56],[43,6,35,4],[43,7,35,5],[43,8,35,6],[44,6,37,4],[44,10,37,8],[44,11,37,9,"response"],[44,19,37,17],[44,20,37,18,"ok"],[44,22,37,20],[44,24,37,22],[45,8,38,6],[45,14,38,12,"text"],[45,18,38,16],[45,21,38,19],[45,27,38,25,"response"],[45,35,38,33],[45,36,38,34,"text"],[45,40,38,38],[45,41,38,39],[45,42,38,40],[46,8,39,6,"console"],[46,15,39,13],[46,16,39,14,"error"],[46,21,39,19],[46,22,39,20],[46,50,39,48],[46,52,39,50,"text"],[46,56,39,54],[46,57,39,55],[47,8,40,6],[47,14,40,12],[47,18,40,16,"Error"],[47,23,40,21],[47,24,40,22],[47,42,40,40,"response"],[47,50,40,48],[47,51,40,49,"statusText"],[47,61,40,59],[47,63,40,61],[47,64,40,62],[48,6,41,4],[50,6,43,4],[51,6,44,4],[51,12,44,10,"contentType"],[51,23,44,21],[51,26,44,24,"response"],[51,34,44,32],[51,35,44,33,"headers"],[51,42,44,40],[51,43,44,41,"get"],[51,46,44,44],[51,47,44,45],[51,61,44,59],[51,62,44,60],[52,6,45,4],[52,10,45,8],[52,11,45,9,"contentType"],[52,22,45,20],[52,26,45,24],[52,27,45,25,"contentType"],[52,38,45,36],[52,39,45,37,"includes"],[52,47,45,45],[52,48,45,46],[52,66,45,64],[52,67,45,65],[52,69,45,67],[53,8,46,6],[53,14,46,12,"text"],[53,18,46,16],[53,21,46,19],[53,27,46,25,"response"],[53,35,46,33],[53,36,46,34,"text"],[53,40,46,38],[53,41,46,39],[53,42,46,40],[54,8,47,6,"console"],[54,15,47,13],[54,16,47,14,"error"],[54,21,47,19],[54,22,47,20],[54,51,47,49],[54,53,47,51,"text"],[54,57,47,55],[54,58,47,56,"substring"],[54,67,47,65],[54,68,47,66],[54,69,47,67],[54,71,47,69],[54,74,47,72],[54,75,47,73],[54,76,47,74],[55,8,48,6],[55,14,48,12],[55,18,48,16,"Error"],[55,23,48,21],[55,24,48,22],[55,101,48,99],[55,102,48,100],[56,6,49,4],[57,6,51,4],[57,12,51,10,"data"],[57,16,51,14],[57,19,51,17],[57,25,51,23,"response"],[57,33,51,31],[57,34,51,32,"json"],[57,38,51,36],[57,39,51,37],[57,40,51,38],[58,6,52,4],[58,13,52,11,"data"],[58,17,52,15],[59,4,53,2],[59,5,53,3],[59,6,53,4],[59,13,53,11,"error"],[59,18,53,16],[59,20,53,18],[60,6,54,4,"console"],[60,13,54,11],[60,14,54,12,"error"],[60,19,54,17],[60,20,54,18],[60,39,54,37],[60,41,54,39,"error"],[60,46,54,44],[60,47,54,45],[61,6,55,4],[61,12,55,10,"error"],[61,17,55,15],[62,4,56,2],[63,2,57,0],[63,3,57,1],[65,2,59,0],[66,0,60,0],[67,0,61,0],[68,2,59,0,"exports"],[68,9,59,0],[68,10,59,0,"searchInfoGenie"],[68,25,59,0],[68,28,59,0,"searchInfoGenie"],[68,43,59,0],[69,2,62,7],[69,8,62,13,"getSearchHistory"],[69,24,62,29],[69,27,62,32],[69,33,62,32,"getSearchHistory"],[69,34,62,39,"limit"],[69,39,62,44],[69,42,62,47],[69,44,62,49],[69,46,62,51,"offset"],[69,52,62,57],[69,55,62,60],[69,56,62,61],[69,61,62,66],[70,4,63,2],[70,8,63,6],[71,6,64,4],[71,12,64,10,"baseURL"],[71,19,64,17],[71,22,64,20,"getBaseURL"],[71,32,64,30],[71,33,64,31],[71,34,64,32],[72,6,65,4],[72,12,65,10,"url"],[72,15,65,13],[72,18,65,16,"baseURL"],[72,25,65,23],[72,28,66,8],[72,31,66,11,"baseURL"],[72,38,66,18],[72,67,66,47,"limit"],[72,72,66,52],[72,83,66,63,"offset"],[72,89,66,69],[72,91,66,71],[72,94,67,8],[72,123,67,37,"limit"],[72,128,67,42],[72,139,67,53,"offset"],[72,145,67,59],[72,147,67,61],[73,6,69,4],[73,12,69,10,"response"],[73,20,69,18],[73,23,69,21],[73,29,69,27],[73,33,69,27,"fetchToWeb"],[73,47,69,37],[73,49,69,38,"url"],[73,52,69,41],[73,54,69,43],[74,8,70,6,"method"],[74,14,70,12],[74,16,70,14],[74,21,70,19],[75,8,71,6,"headers"],[75,15,71,13],[75,17,71,15],[76,10,72,8],[76,24,72,22],[76,26,72,24],[77,8,73,6],[78,6,74,4],[78,7,74,5],[78,8,74,6],[79,6,76,4],[79,10,76,8],[79,11,76,9,"response"],[79,19,76,17],[79,20,76,18,"ok"],[79,22,76,20],[79,24,76,22],[80,8,77,6],[80,14,77,12],[80,18,77,16,"Error"],[80,23,77,21],[80,24,77,22],[80,52,77,50,"response"],[80,60,77,58],[80,61,77,59,"statusText"],[80,71,77,69],[80,73,77,71],[80,74,77,72],[81,6,78,4],[82,6,80,4],[82,12,80,10,"data"],[82,16,80,14],[82,19,80,17],[82,25,80,23,"response"],[82,33,80,31],[82,34,80,32,"json"],[82,38,80,36],[82,39,80,37],[82,40,80,38],[83,6,81,4],[83,13,81,11,"data"],[83,17,81,15],[84,4,82,2],[84,5,82,3],[84,6,82,4],[84,13,82,11,"error"],[84,18,82,16],[84,20,82,18],[85,6,83,4,"console"],[85,13,83,11],[85,14,83,12,"error"],[85,19,83,17],[85,20,83,18],[85,43,83,41],[85,45,83,43,"error"],[85,50,83,48],[85,51,83,49],[86,6,84,4],[86,13,84,11],[86,15,84,13],[87,4,85,2],[88,2,86,0],[88,3,86,1],[90,2,88,0],[91,0,89,0],[92,0,90,0],[93,2,88,0,"exports"],[93,9,88,0],[93,10,88,0,"getSearchHistory"],[93,26,88,0],[93,29,88,0,"getSearchHistory"],[93,45,88,0],[94,2,91,7],[94,8,91,13,"saveResearch"],[94,20,91,25],[94,23,91,28],[94,29,91,28,"saveResearch"],[94,30,91,35,"searchId"],[94,38,91,43],[94,40,91,45,"title"],[94,45,91,50],[94,47,91,52,"folder"],[94,53,91,58],[94,56,91,61],[94,65,91,70],[94,67,91,72,"notes"],[94,72,91,77],[94,75,91,80],[94,77,91,82],[94,82,91,87],[95,4,92,2],[95,8,92,6],[96,6,93,4],[96,12,93,10,"baseURL"],[96,19,93,17],[96,22,93,20,"getBaseURL"],[96,32,93,30],[96,33,93,31],[96,34,93,32],[97,6,94,4],[97,12,94,10,"url"],[97,15,94,13],[97,18,94,16,"baseURL"],[97,25,94,23],[97,28,94,26],[97,31,94,29,"baseURL"],[97,38,94,36],[97,59,94,57],[97,62,94,60],[97,83,94,81],[98,6,96,4],[98,12,96,10,"response"],[98,20,96,18],[98,23,96,21],[98,29,96,27],[98,33,96,27,"fetchToWeb"],[98,47,96,37],[98,49,96,38,"url"],[98,52,96,41],[98,54,96,43],[99,8,97,6,"method"],[99,14,97,12],[99,16,97,14],[99,22,97,20],[100,8,98,6,"headers"],[100,15,98,13],[100,17,98,15],[101,10,99,8],[101,24,99,22],[101,26,99,24],[102,8,100,6],[102,9,100,7],[103,8,101,6,"body"],[103,12,101,10],[103,14,101,12,"JSON"],[103,18,101,16],[103,19,101,17,"stringify"],[103,28,101,26],[103,29,101,27],[104,10,102,8,"search_id"],[104,19,102,17],[104,21,102,19,"searchId"],[104,29,102,27],[105,10,103,8,"title"],[105,15,103,13],[106,10,104,8,"folder"],[106,16,104,14],[107,10,105,8,"notes"],[108,8,106,6],[108,9,106,7],[109,6,107,4],[109,7,107,5],[109,8,107,6],[110,6,109,4],[110,10,109,8],[110,11,109,9,"response"],[110,19,109,17],[110,20,109,18,"ok"],[110,22,109,20],[110,24,109,22],[111,8,110,6],[111,14,110,12],[111,18,110,16,"Error"],[111,23,110,21],[111,24,110,22],[111,52,110,50,"response"],[111,60,110,58],[111,61,110,59,"statusText"],[111,71,110,69],[111,73,110,71],[111,74,110,72],[112,6,111,4],[113,6,113,4],[113,12,113,10,"data"],[113,16,113,14],[113,19,113,17],[113,25,113,23,"response"],[113,33,113,31],[113,34,113,32,"json"],[113,38,113,36],[113,39,113,37],[113,40,113,38],[114,6,114,4],[114,13,114,11,"data"],[114,17,114,15],[115,4,115,2],[115,5,115,3],[115,6,115,4],[115,13,115,11,"error"],[115,18,115,16],[115,20,115,18],[116,6,116,4,"console"],[116,13,116,11],[116,14,116,12,"error"],[116,19,116,17],[116,20,116,18],[116,42,116,40],[116,44,116,42,"error"],[116,49,116,47],[116,50,116,48],[117,6,117,4],[117,12,117,10,"error"],[117,17,117,15],[118,4,118,2],[119,2,119,0],[119,3,119,1],[121,2,121,0],[122,0,122,0],[123,0,123,0],[124,2,121,0,"exports"],[124,9,121,0],[124,10,121,0,"saveResearch"],[124,22,121,0],[124,25,121,0,"saveResearch"],[124,37,121,0],[125,2,124,7],[125,8,124,13,"getSavedResearch"],[125,24,124,29],[125,27,124,32],[125,33,124,32,"getSavedResearch"],[125,34,124,39,"folder"],[125,40,124,45],[125,43,124,48],[125,47,124,52],[125,49,124,54,"limit"],[125,54,124,59],[125,57,124,62],[125,59,124,64],[125,61,124,66,"offset"],[125,67,124,72],[125,70,124,75],[125,71,124,76],[125,76,124,81],[126,4,125,2],[126,8,125,6],[127,6,126,4],[127,12,126,10,"baseURL"],[127,19,126,17],[127,22,126,20,"getBaseURL"],[127,32,126,30],[127,33,126,31],[127,34,126,32],[128,6,127,4],[128,10,127,8,"url"],[128,13,127,11],[128,16,127,14,"baseURL"],[128,23,127,21],[128,26,128,8],[128,29,128,11,"baseURL"],[128,36,128,18],[128,65,128,47,"limit"],[128,70,128,52],[128,81,128,63,"offset"],[128,87,128,69],[128,89,128,71],[128,92,129,8],[128,121,129,37,"limit"],[128,126,129,42],[128,137,129,53,"offset"],[128,143,129,59],[128,145,129,61],[129,6,130,4],[129,10,130,8,"folder"],[129,16,130,14],[129,18,130,16],[130,8,131,6,"url"],[130,11,131,9],[130,15,131,13],[130,26,131,24,"encodeURIComponent"],[130,44,131,42],[130,45,131,43,"folder"],[130,51,131,49],[130,52,131,50],[130,54,131,52],[131,6,132,4],[132,6,134,4],[132,12,134,10,"response"],[132,20,134,18],[132,23,134,21],[132,29,134,27],[132,33,134,27,"fetchToWeb"],[132,47,134,37],[132,49,134,38,"url"],[132,52,134,41],[132,54,134,43],[133,8,135,6,"method"],[133,14,135,12],[133,16,135,14],[133,21,135,19],[134,8,136,6,"headers"],[134,15,136,13],[134,17,136,15],[135,10,137,8],[135,24,137,22],[135,26,137,24],[136,8,138,6],[137,6,139,4],[137,7,139,5],[137,8,139,6],[138,6,141,4],[138,10,141,8],[138,11,141,9,"response"],[138,19,141,17],[138,20,141,18,"ok"],[138,22,141,20],[138,24,141,22],[139,8,142,6],[139,14,142,12],[139,18,142,16,"Error"],[139,23,142,21],[139,24,142,22],[139,59,142,57,"response"],[139,67,142,65],[139,68,142,66,"statusText"],[139,78,142,76],[139,80,142,78],[139,81,142,79],[140,6,143,4],[141,6,145,4],[141,12,145,10,"data"],[141,16,145,14],[141,19,145,17],[141,25,145,23,"response"],[141,33,145,31],[141,34,145,32,"json"],[141,38,145,36],[141,39,145,37],[141,40,145,38],[142,6,146,4],[142,13,146,11,"data"],[142,17,146,15],[143,4,147,2],[143,5,147,3],[143,6,147,4],[143,13,147,11,"error"],[143,18,147,16],[143,20,147,18],[144,6,148,4,"console"],[144,13,148,11],[144,14,148,12,"error"],[144,19,148,17],[144,20,148,18],[144,47,148,45],[144,49,148,47,"error"],[144,54,148,52],[144,55,148,53],[145,6,149,4],[145,13,149,11],[145,15,149,13],[146,4,150,2],[147,2,151,0],[147,3,151,1],[148,2,151,2,"exports"],[148,9,151,2],[148,10,151,2,"getSavedResearch"],[148,26,151,2],[148,29,151,2,"getSavedResearch"],[148,45,151,2],[149,0,151,2],[149,3]],"functionMap":{"names":["<global>","getBaseURL","searchInfoGenie","getSearchHistory","saveResearch","getSavedResearch"],"mappings":"AAA;mBCG;CDe;+BEK;CFiC;gCGK;CHwB;4BIK;CJ4B;gCKK;CL2B"}},"type":"js/module"}]}